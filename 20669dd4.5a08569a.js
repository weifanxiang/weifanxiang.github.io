(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{72:function(e,a,i){"use strict";i.r(a),i.d(a,"frontMatter",(function(){return r})),i.d(a,"metadata",(function(){return c})),i.d(a,"toc",(function(){return p})),i.d(a,"default",(function(){return b}));var t=i(3),n=i(7),l=(i(0),i(88)),r={id:"installation",title:"\u5b89\u88c5\u5e76\u914d\u7f6e\u5f00\u53d1\u73af\u5883",sidebar_label:"\u5b89\u88c5\u5e76\u914d\u7f6e\u5f00\u53d1\u73af\u5883"},c={unversionedId:"guides/installation",id:"guides/installation",isDocsHomePage:!1,title:"\u5b89\u88c5\u5e76\u914d\u7f6e\u5f00\u53d1\u73af\u5883",description:"\u5b89\u88c5",source:"@site/docs\\guides\\installation.md",slug:"/guides/installation",permalink:"/docs/guides/installation",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/guides/installation.md",version:"current",sidebar_label:"\u5b89\u88c5\u5e76\u914d\u7f6e\u5f00\u53d1\u73af\u5883",sidebar:"docs",previous:{title:"\u5728\u5f00\u59cb\u4e4b\u524d",permalink:"/docs/guides/before-start"},next:{title:"Graia \u8fde\u63a5\u914d\u7f6e\u53c2\u6570",permalink:"/docs/guides/about-connection-config"}},p=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",children:[{value:"\u624b\u52a8\u914d\u7f6e",id:"\u624b\u52a8\u914d\u7f6e",children:[]},{value:"\u4f7f\u7528 GraiaOK",id:"\u4f7f\u7528-graiaok",children:[]},{value:"\u4f7f\u7528 Graia CLI",id:"\u4f7f\u7528-graia-cli",children:[]}]},{value:"\u5386\u53f2\u6027\u7684\u7b2c\u4e00\u6b21\u5bf9\u8bdd",id:"\u5386\u53f2\u6027\u7684\u7b2c\u4e00\u6b21\u5bf9\u8bdd",children:[]}],o={toc:p};function b(e){var a=e.components,i=Object(n.a)(e,["components"]);return Object(l.b)("wrapper",Object(t.a)({},o,i,{components:a,mdxType:"MDXLayout"}),Object(l.b)("h2",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),Object(l.b)("p",null,"\u8981\u60f3\u4f7f\u7528 Graia, \u9996\u5148\u80af\u5b9a\u5f97\u914d\u7f6e\u73af\u5883. \u8fd9\u91cc\u7ed9\u51fa\u4e09\u79cd\u914d\u7f6e\u65b9\u6cd5"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},Object(l.b)("a",{parentName:"p",href:"#%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE"},"\u624b\u52a8\u914d\u7f6e"))),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},Object(l.b)("a",{parentName:"p",href:"#%E4%BD%BF%E7%94%A8-graiaok"},"\u4f7f\u7528 GraiaOK"))),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},Object(l.b)("a",{parentName:"p",href:"#%E4%BD%BF%E7%94%A8-graia-cli"},"\u4f7f\u7528 Graia CLI")))),Object(l.b)("h3",{id:"\u624b\u52a8\u914d\u7f6e"},"\u624b\u52a8\u914d\u7f6e"),Object(l.b)("h4",{id:"mirai-console-loder\u5b89\u88c5"},"Mirai-Console-loder\u5b89\u88c5"),Object(l.b)("p",null,"\u5728\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528iTXTech MCL Installer\u6765\u4e00\u952e\u5b89\u88c5\u6240\u6709\u6240\u9700\u73af\u5883\u3002"),Object(l.b)("p",null,"\u6253\u5f00",Object(l.b)("a",{parentName:"p",href:"https://github.com/iTXTech/mcl-installer"},"Mirai Console Loader"),"\u7684Github\u4ed3\u5e93"),Object(l.b)("p",null,"\u4e0b\u8f7dReleases\u4e2d\u7684mcl-installer-x.x.x-windows-amd64.exe"),Object(l.b)("p",null,"\u5c06\u5176\u590d\u5236\u5230 \u5230\u60f3\u8981\u5b89\u88c5 ",Object(l.b)("inlineCode",{parentName:"p"},"iTXTech MCL")," \u7684\u76ee\u5f55\u4e2d\u6267\u884c\u3002"),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"\u5982\u679c\u60a8\u662f\u65b0\u624b\uff0c\u4e14\u6ca1\u6709\u7279\u6b8a\u9700\u6c42\uff0c\u4e00\u8def\u56de\u8f66\u5c31\u80fd\u8fdb\u884c\u5b89\u88c5\u4e86\u3002")),Object(l.b)("blockquote",null,Object(l.b)("pre",{parentName:"blockquote"},Object(l.b)("code",{parentName:"pre",className:"language-log"},"Java version (8-15, default: 11): \u9009\u62e9Java\u7248\u672c\u5b89\u88c5\uff0c\u9ed8\u8ba4\u4e3aJava 11\nJRE or JDK (1: JRE, 2: JDK, default: JRE): \u9009\u62e9JRE\u8fd8\u662fJDK\u5b89\u88c5\uff0c\u9ed8\u8ba4\u4e3aJRE\nBinary Architecture (default: x64): \u9009\u62e9\u67b6\u6784\u5b89\u88c5\uff0c\u9ed8\u8ba4x64\n\u5982\u679c\u64cd\u4f5c\u7cfb\u7edf\u4e3aWindows\u5e76\u4e14\u9700\u8981\u4f7f\u7528 mirai-native\uff0c\u8bf7\u9009\u62e9 x32\uff08\u800c\u4e0d\u662fi386\u7b49\u5176\u4ed6\u540d\u5b57\uff09\n\nThe latest stable version of iTXTech MCL is x.x.x \u83b7\u53d6\u6700\u65b0MCL\u5e76\u8be2\u95ee\u662f\u5426\u4e0b\u8f7d\nWould you like to download it? (Y/N, default: Y) Y\uff1a\u4e0b\u8f7d\uff0cN\uff1a\u53d6\u6d88\n"))),Object(l.b)("p",null,"\u6267\u884c\u201c./mcl\u201d\u542f\u52a8mcl\uff0c\u4f7f\u7528\u201c?\u201d\u6765\u67e5\u770b\u8be6\u7ec6\u4f7f\u7528\uff0c\u5728\u8fd9\u91cc\u4e0d\u8fc7\u591a\u8d58\u8ff0\u3002"),Object(l.b)("h4",{id:"\u5b89\u88c5mirai-api-http"},"\u5b89\u88c5",Object(l.b)("inlineCode",{parentName:"h4"},"mirai-api-http")),Object(l.b)("p",null,"\u4f7f\u7528 ",Object(l.b)("a",{parentName:"p",href:"https://github.com/iTXTech/mirai-console-loader"},"Mirai Console Loader")," \u5b89\u88c5",Object(l.b)("inlineCode",{parentName:"p"},"mirai-api-http")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"MCL")," \u652f\u6301\u81ea\u52a8\u66f4\u65b0\u63d2\u4ef6\uff0c\u652f\u6301\u8bbe\u7f6e\u63d2\u4ef6\u66f4\u65b0\u9891\u9053\u7b49\u529f\u80fd")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-shell"},"./mcl --update-package net.mamoe:mirai-api-http --channel stable --type plugin\n")),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"\u542f\u52a8 Mirai Console Loader (\u9996\u6b21\u542f\u52a8\u4f1a\u4e0b\u8f7d\u6838\u5fc3\u548c\u63d2\u4ef6,\u5e76\u751f\u6210\u914d\u7f6e\u6587\u4ef6)"),Object(l.b)("li",{parentName:"ol"},Object(l.b)("a",{parentName:"li",href:"#%E7%BC%96%E8%BE%91mirai%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"},"\u7f16\u8f91",Object(l.b)("inlineCode",{parentName:"a"},"config/net.mamoe.mirai-api-http/setting.yml"),"\u914d\u7f6e\u6587\u4ef6"))),Object(l.b)("h4",{id:"\u7f16\u8f91mirai\u914d\u7f6e\u6587\u4ef6"},"\u7f16\u8f91mirai\u914d\u7f6e\u6587\u4ef6"),Object(l.b)("p",null,"\u73b0\u5728\u6211\u4eec\u9700\u8981\u8fdb\u884cmirai-api-http\u7684\u914d\u7f6e\uff0c\u65b9\u4fbf\u8ba9\u5176\u4e0egraia\u8fdb\u884c\u901a\u4fe1\uff0c\u6587\u4ef6\u5e94\u8be5\u5728mcl\u4e2d\u5728config\\net.mamoe.mirai-api-http\\setting.yml"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-yaml"},"# file: mirai-client/config/MiraiAPIHTTP/net.mamoe.mirai.api.http.config.Setting\nauthKey: graia-mirai-api-http-authkey # \u4f60\u53ef\u4ee5\u81ea\u5df1\u8bbe\u5b9a, \u8fd9\u91cc\u4f5c\u4e3a\u793a\u8303\n\n# \u53ef\u9009\uff0c\u7f13\u5b58\u5927\u5c0f\uff0c\u9ed8\u8ba44096.\u7f13\u5b58\u8fc7\u5c0f\u4f1a\u5bfc\u81f4\u5f15\u7528\u56de\u590d\u4e0e\u64a4\u56de\u6d88\u606f\u5931\u8d25\ncacheSize: 4096\n\nenableWebsocket: true # \u662f\u5426\u542f\u7528 websocket \u65b9\u5f0f, \u82e5\u4f7f\u7528 websocket \u65b9\u5f0f\u4ea4\u4e92\u4f1a\u5f97\u5230\u66f4\u597d\u7684\u6027\u80fd\nhost: '0.0.0.0' # httpapi \u670d\u52a1\u76d1\u542c\u7684\u5730\u5740, \u9519\u8bef\u7684\u8bbe\u7f6e\u4f1a\u9020\u6210 Graia Application \u65e0\u6cd5\u4e0e\u5176\u4ea4\u4e92\nport: 8080 # httpapi \u670d\u52a1\u76d1\u542c\u7684\u7aef\u53e3, \u9519\u8bef\u7684\u8bbe\u7f6e\u4f1a\u9020\u6210 Graia Application \u65e0\u6cd5\u4e0e\u5176\u4ea4\u4e92\n")),Object(l.b)("p",null,"\u5982\u679c\u7aef\u53e3\u88ab\u5360\u7528\u8bf7\u4fee\u6539port"),Object(l.b)("h4",{id:"\u5b89\u88c5graia"},"\u5b89\u88c5graia"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-shell"},"pip install graia-application-mirai\n")),Object(l.b)("p",null,"ps\uff1a\u8fd9\u540c\u65f6\u4f1a\u5b89\u88c5 ",Object(l.b)("inlineCode",{parentName:"p"},"graia-application-mirai")," \u548c ",Object(l.b)("inlineCode",{parentName:"p"},"graia-broadcast")," \u8fd9\u4e24\u4e2a\u5305\u7684\u6700\u65b0\u7248\u672c."),Object(l.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(l.b)("div",{parentName:"div",className:"admonition-heading"},Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",{parentName:"h5",className:"admonition-icon"},Object(l.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(l.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),Object(l.b)("div",{parentName:"div",className:"admonition-content"},Object(l.b)("p",{parentName:"div"},"\u5982\u679c\u60a8\u60f3\u66f4\u65b0\u5176\u4e2d\u7684\u67d0\u4e00\u4e2a\uff1a"),Object(l.b)("pre",{parentName:"div"},Object(l.b)("code",{parentName:"pre",className:"language-shell"},"# \u66f4\u65b0 graia-application-mirai\npip install graia-application-mirai --upgrade\n# \u66f4\u65b0 graia-broadcast\npip install graia-broadcast --upgrade\n")))),Object(l.b)("h3",{id:"\u4f7f\u7528-graiaok"},"\u4f7f\u7528 GraiaOK"),Object(l.b)("p",null,"\u672a\u5b8c\u5f85\u7eed ..."),Object(l.b)("h3",{id:"\u4f7f\u7528-graia-cli"},"\u4f7f\u7528 Graia CLI"),Object(l.b)("p",null,":::warn\nGraia CLI\u4e0d\u652f\u6301\u81ea\u52a8\u83b7\u53d6MCL\uff0c\u8bf7\u81ea\u884c\u83b7\u53d6\n:::"),Object(l.b)("blockquote",null,Object(l.b)("ol",{parentName:"blockquote"},Object(l.b)("li",{parentName:"ol"},"\u6253\u5f00\u60a8\u7684shell"),Object(l.b)("li",{parentName:"ol"},"\u8f93\u5165 pip install graiax_cli"),Object(l.b)("li",{parentName:"ol"},"\u5982\u679c\u60a8\u662fLinux\u7528\u6237\uff0c\u90a3\u60a8\u53ef\u80fd\u9700\u8981\u4f7f\u7528"),Object(l.b)("li",{parentName:"ol"},"pip3 install graiax_cli"),Object(l.b)("li",{parentName:"ol"},"\u6216\u8005\u4f7f\u7528poetry"),Object(l.b)("li",{parentName:"ol"},"poetry add graiax_cli"),Object(l.b)("li",{parentName:"ol"},"\u5b89\u88c5\u5b8c\u6210\u540e\u4f7f\u7528\u5982\u4e0b\u6307\u4ee4: ",Object(l.b)("inlineCode",{parentName:"li"},"graiax")," \u5373\u53ef\n\u672c\u6559\u7a0b\u6765\u81ea",Object(l.b)("a",{parentName:"li",href:"https://github.com/Little-YangNian/"},"Little YangNian")))),Object(l.b)("h2",{id:"\u5386\u53f2\u6027\u7684\u7b2c\u4e00\u6b21\u5bf9\u8bdd"},"\u5386\u53f2\u6027\u7684\u7b2c\u4e00\u6b21\u5bf9\u8bdd"),Object(l.b)("p",null,"\u5c06\u4ee5\u4e0b\u4ee3\u7801\u4fdd\u5b58\u5230\u4e00\u4e2apy\u6587\u4ef6\uff1a"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-python"},'from graia.broadcast import Broadcast\nfrom graia.application import GraiaMiraiApplication, Session\nfrom graia.application.message.chain import MessageChain\nimport asyncio\n\nfrom graia.application.message.elements.internal import Plain\nfrom graia.application.friend import Friend\n\nloop = asyncio.get_event_loop()\n\nbcc = Broadcast(loop=loop)\napp = GraiaMiraiApplication(\n    broadcast=bcc,\n    connect_info=Session(\n        host="http://localhost:8080", # \u586b\u5165 httpapi \u670d\u52a1\u8fd0\u884c\u7684\u5730\u5740\u201c8080\u201d\u4e3a\u60a8\u6240\u5199\u7684port\n        authKey="graia-mirai-api-http-authkey", # \u586b\u5165 authKey\n        account=5234120587, # \u4f60\u7684\u673a\u5668\u4eba\u7684 qq \u53f7\n        websocket=True # Graia \u5df2\u7ecf\u53ef\u4ee5\u6839\u636e\u6240\u914d\u7f6e\u7684\u6d88\u606f\u63a5\u6536\u7684\u65b9\u5f0f\u6765\u4fdd\u8bc1\u6d88\u606f\u63a5\u6536\u90e8\u5206\u7684\u6b63\u5e38\u8fd0\u4f5c.\n    )\n)\n\n@bcc.receiver("FriendMessage")\nasync def friend_message_listener(app: GraiaMiraiApplication, friend: Friend):\n    await app.sendFriendMessage(friend, MessageChain.create([\n        Plain("Hello, World!")\n    ]))\n\napp.launch_blocking()\n')),Object(l.b)("p",null,"\u8fd0\u884c\u4f7f\u7528python \u6587\u4ef6\u540d.py\u8fd0\u884c\u8fd9\u6bb5\u4ee3\u7801\uff0c\u5c06\u4f1a\u8f93\u51fa\uff1a"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-log"},"[2020-07-25 21:42:11,929][INFO]: launching app...\n[2020-07-25 21:42:11,960][INFO]: using websocket to receive event\n[2020-07-25 21:42:11,964][INFO]: event reveiver running...\n")),Object(l.b)("p",null,"\u7136\u540e\u548c\u673a\u5668\u4eba\u8d26\u53f7\u53d1\u8d77\u597d\u53cb\u5bf9\u8bdd, \u5f53\u4f60\u7684\u673a\u5668\u4eba\u5411\u4f60\u53d1\u51fa ",Object(l.b)("inlineCode",{parentName:"p"},"Hello, World!")," \u65f6, \u4f60\u5c31\u5df2\u7ecf\u90e8\u7f72\u597d\u4e86\u4e00\u4e2a\u6700\u5c0f\u7684 ",Object(l.b)("inlineCode",{parentName:"p"},"Graia Framework")," \u5e94\u7528, \u5728\u63a5\u4e0b\u6765\u7684\u6587\u6863\u4e2d, \u6211\u4eec\u5c06\u8be6\u7ec6\u89e3\u5256\u8be5\u7a0b\u5e8f"))}b.isMDXComponent=!0}}]);