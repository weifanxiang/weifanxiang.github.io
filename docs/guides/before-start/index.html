<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Graia Document Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Graia Document Blog Atom Feed"><title data-react-helmet="true">在开始之前 | Graia Document</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="在开始之前 | Graia Document"><meta data-react-helmet="true" name="description" content="| 预备知识: | 掌握python的基本语法, 熟悉电脑的基本操作 |"><meta data-react-helmet="true" property="og:description" content="| 预备知识: | 掌握python的基本语法, 熟悉电脑的基本操作 |"><meta data-react-helmet="true" property="og:url" content="http://graiax.xyz//docs/guides/before-start"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://graiax.xyz//docs/guides/before-start"><link rel="stylesheet" href="/styles.21f0090d.css">
<link rel="preload" href="/styles.dccb9d42.js" as="script">
<link rel="preload" href="/runtime~main.4afdf158.js" as="script">
<link rel="preload" href="/main.63623e3e.js" as="script">
<link rel="preload" href="/common.7d11658c.js" as="script">
<link rel="preload" href="/2.a1f0fbba.js" as="script">
<link rel="preload" href="/13.74563554.js" as="script">
<link rel="preload" href="/14.ed9486b4.js" as="script">
<link rel="preload" href="/f976f453.27d5effc.js" as="script">
<link rel="preload" href="/17896441.c68a707e.js" as="script">
<link rel="preload" href="/ace41326.1c0cb8df.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Graiax Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="Graiax Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Graiax</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/GraiaProject/Application" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Graiax Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="Graiax Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Graiax</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/GraiaProject/Application" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">简介</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">入门</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/guides/before-start">在开始之前</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/installation">安装并配置开发环境</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/about-connection-config">Graia 连接配置参数</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">附录</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/appendixs/asyncio-basic">asyncio 基础教程</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">在开始之前</h1></header><div class="markdown"><table><thead><tr><th>预备知识:</th><th>掌握python的基本语法, 熟悉电脑的基本操作</th></tr></thead><tbody><tr><td><strong>学习目标</strong>:</td><td><strong>学习开发<code>python qq</code>机器人的预备知识</strong></td></tr></tbody></table><p>在开始之前, 我会向你介绍关于此项目的一些基本概念。这些概率包括：</p><ul><li><code>Mirai</code>框架的基本架构</li><li><del><code>Miria</code>框架的历史</del></li><li><code>Graia</code>框架的基本架构</li></ul><p>这些概率对于你理解 <code>Mirai</code> 各大项目都是有好处的。</p><p>同时, 使用 <code>Graia</code> 框架来开发 <code>qq</code> 机器人， 需要使用 <code>python</code> 的很多高级语法,，将在本节的第二部分来具体介绍。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="基本概念"></a>基本概念<a class="hash-link" href="#基本概念" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="mirai-框架的架构"></a><code>Mirai</code> 框架的架构<a class="hash-link" href="#mirai-框架的架构" title="Direct link to heading">#</a></h3><p><strong><code>Mirai</code> 框架有着极其丰富的生态和架构, 本指南只对其进行简单的介绍。</strong></p><p><code>Mirai</code>是使用 <code>Kotlin</code> 编程语言编写的一个 <code>qq机器人</code> 框架 (后文简称: <code>qq bot</code> 或 <code>bot</code>)。</p><p><code>Kotlin</code> 编程语言是Java编程语言的一种方言， 你可以理解成 <code>Mirai</code> 就是用Java写的。</p><blockquote><p><code>Kotlin</code> 可以编译成 <code>Java</code> 字节码，也可以编译成 <code>JavaScript</code>， 方便在没有 <code>JVM</code> 的设备上运行。 除此之外 <code>Kotlin</code> 还可以编译成二进制代码直接运行在机器上(例如嵌入式设备或 iOS)。
<code>Kotlin</code> 已正式成为 <code>Android</code> 官方支持开发语言。</p><p>——来自百度百科</p></blockquote><p>所以如果想要运行 <code>Mirai</code> 框架, 你必须要配置好 <code>jvm</code> (Java运行时环境)。</p><p><code>Mirai</code> 为了服务各个社区不同语言的使用者，于是开发了 <code>mirai-api-http</code> (简称 <code>mah</code>)。</p><p>我们的 <code>Graia</code> 也依赖于 <code>mah</code>。</p><p><strong><code>Mirai</code> 框架和其各个组件之间的关系如下图所示</strong></p><p><img alt="1.jfif" src="/assets/images/1-333a8f0e9b81a71c2fee6a209d13f816.jfif"></p><p><strong>如此复杂的关系使得 <code>Mirai</code> 各个组件之间的管理十分困难</strong></p><p>于是有志人士(<a href="https://github.com/iTXTech" target="_blank" rel="noopener noreferrer">iTX Technologies</a>)开发出了 <code>iTX Technologies Mirai Console Loader</code> (以下简称 <code>MCL</code>)</p><p>但这样对一些初学者来说门槛还是很高，他们又开发了 <code>iTX Technologies Mirai Console Loader Installer</code> （以下简称 mcli）， 支持自动下载<code>Java</code> 运行时和 <a href="https://github.com/iTXTech/mirai-console-loader" target="_blank" rel="noopener noreferrer">iTXTech Mirai Console Loader</a>。</p><p>你可以在<a href="https://github.com/mamoe/mirai/blob/dev/docs/mirai-ecology.md" target="_blank" rel="noopener noreferrer">这里</a>深入的理解 <code>Mirai</code> 的生态</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="什么是-graia-框架"></a>什么是 <code>Graia</code> 框架<a class="hash-link" href="#什么是-graia-框架" title="Direct link to heading">#</a></h3><p><code>Graia</code> 框架是基于 <code>mirai-api-http</code> 的即时聊天软件 <strong>自动化</strong> 框架。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="graia-基于事件系统"></a><code>Graia</code> 基于事件系统<a class="hash-link" href="#graia-基于事件系统" title="Direct link to heading">#</a></h4><p><code>Graia</code> 对 <code>mah</code> 进行了封装, 实现了<strong>事件系统</strong></p><p>接下来我们使用<strong>伪代码</strong>来比较使用两种方式开发bot的不同之处</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-python codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 在python内使用原生mah api</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># bot接受消息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> time </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> sleep</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获得一段时间内Mirai接受到的所有消息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    messages </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> fetchMessage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 遍历这段时间内获得到的所有消息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> message_chain </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> messages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 打印每一条的文本信息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">message_chain</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sleep</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">50</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 防止对mah发送大量请求</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-python codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 在python内使用 Graia , 以事件系统的思想开发 bot .</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 实例化一个bot实例</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">bot </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> MiraiBot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 为该bot注册一个事件, 约定当 bot 收到 好友消息(FriendMessage)的时候调用这个函数.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 这里使用了python装饰器语法糖, 将在后面说明</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">@bot</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">receiver</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;FriendMessage&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">friend_message_listener</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">bot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> friend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># bot对friend( 该好友 )发送消息, 发送的文本为 ”Hello, World!“</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> bot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sendFriendMessage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">friend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello, World!&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 让bot开始工作</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">bot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>你可能觉得第一种方法更好理解, 但是第二种方法更加符合正常人的思维逻辑, 同时第二种方法更加高效率, 可以使开发bot模块化.</strong></p><p>看不懂没关系, 你会在接下来的学习中逐渐了解这两种设计思想的区别, 到时候你可以再回来看看, 你一定会有新的感悟</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="graia-对-mah-进行了高层封装"></a><code>Graia</code> 对 <code>mah</code> 进行了高层封装<a class="hash-link" href="#graia-对-mah-进行了高层封装" title="Direct link to heading">#</a></h4><p>你平时使用 <code>qq</code> 发送的消息并非纯文本, 你发送的消息包括了:</p><ul><li>表情</li><li>图片</li><li>语言</li><li>动画表情</li><li><code>json</code> 消息</li><li><code>xml</code> 消息</li><li>……</li></ul><p>不仅如此, 你发送的信息还可能是以上种类的组合体, 例如:</p><ul><li>图片加文字</li><li>@加文字</li></ul><p>这些消息在 <code>mirai</code> 使用 <code>MessageChain</code> (消息链)来表示</p><p>因此在 <code>mah</code> 中, 你接收到的消息大概长这个样子:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GroupMessage&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 消息类型:GroupMessage或FriendMessage或TempMessage或各类Event</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;messageChain&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">              </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 消息链,是一个消息对象构成的数组</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Source&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">123456</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;time&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">123456789</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Plain&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;text&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Miral牛逼&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sender&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">                      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 发送者信息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">123456789</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">             </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 发送者的QQ号码</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;memberName&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;化腾&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 发送者的群名片</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;permission&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;MEMBER&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 发送者的群限权:OWNER、ADMINISTRATOR或MEMBER</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;group&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">                   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 消息发送群的信息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1234567890</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 发送群的群号</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Miral Technology&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 发送群的群名称</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;permission&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;MEMBER&quot;</span><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 发送群中,Bot的群限权</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>这在 <code>python</code> 中很不好进行处理, <code>Graia</code> 在此基础上封装了一些高级 <code>api</code> 用于处理 <code>MessageChain</code>, 例如:</p><ul><li>消息链分片</li><li>消息链重发</li><li>消息链组装</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="graia-项目架构"></a><code>Graia</code> 项目架构<a class="hash-link" href="#graia-项目架构" title="Direct link to heading">#</a></h3><p><code>Graia</code> 项目分为许多子项目</p><ul><li><code>Application</code> 复杂 <code>mah</code> 协议( 必备 )</li><li><code>Broadcast</code> 负责高效的事件系统 ( 必备 )</li><li><code>Schedule</code> 负责定时任务 ( 插件 )</li><li><code>Interrupt</code> 中断任务 ( 插件 )</li></ul><p>所有 <code>Graia</code> 项目可以在<a href="https://github.com/GraiaProject" target="_blank" rel="noopener noreferrer">这里</a>找到。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="python高级语法"></a>python高级语法<a class="hash-link" href="#python高级语法" title="Direct link to heading">#</a></h2><p><code>Graia</code> 框架使用了大量的python高级语法开发，例如：</p><ol><li><p><code>Graia</code> 使用 <code>type hint</code> 来注册事件</p></li><li><p><code>Graia</code> 使用 <code>asyncio</code> 模块来进行事件分发</p></li><li><p><code>Graia</code> 使用大量的 <code>async</code> <code>await</code> 关键字来调用协程</p></li><li><p><code>Graia</code> 使用装饰器来注册事件</p></li></ol><blockquote><p>严格来说 <code>Graia</code> 使用 <code>aplication</code> 来进行事件分发， <code>aplication</code> 使用 <code>asyncio</code>实现</p><p>所以可以说 <code>Graia</code> 使用 <code>asyncio</code>来进行事件分发</p></blockquote><p>因此, 掌握一些 <code>python</code> 的高级语法对接下来的学习十分有必要</p><p>这是你需要提前掌握的高级语法:</p><ul><li><a href="https://docs.python.org/zh-cn/3/library/typing.html" target="_blank" rel="noopener noreferrer"><code>type hint</code></a></li><li><a href="/docs/appendixs/asyncio-basic">协程与 <code>asyncio</code></a></li><li><a href="https://www.runoob.com/w3cnote/python-func-decorators.html" target="_blank" rel="noopener noreferrer">装饰器</a></li></ul><p>如果你还不会，你真应该赶紧学习他们，上面给出的网址是一些较好的教程。</p><p>如果你完全掌握了以上高级语法，那么你可以进入下一节，进行 <code>Graia</code> 的开发了。</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/guides/before-start.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 简介</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/guides/installation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">安装并配置开发环境 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#基本概念" class="table-of-contents__link">基本概念</a><ul><li><a href="#mirai-框架的架构" class="table-of-contents__link"><code>Mirai</code> 框架的架构</a></li><li><a href="#什么是-graia-框架" class="table-of-contents__link">什么是 <code>Graia</code> 框架</a></li><li><a href="#graia-项目架构" class="table-of-contents__link"><code>Graia</code> 项目架构</a></li></ul></li><li><a href="#python高级语法" class="table-of-contents__link">python高级语法</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">入门教程</a></li><li class="footer__item"><a href="https://graiaproject.github.io/Application/" target="_blank" rel="noopener noreferrer" class="footer__link-item">API文档</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">社区 - Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://jq.qq.com/?_wv=1027&amp;k=VXp6plBD" target="_blank" rel="noopener noreferrer" class="footer__link-item">QQ 讨论群</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/zzzzz167/graia-document/blob/main/join_us.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">加入我们</a></li><li class="footer__item"><a href="https://graiax.xyz/_logs" target="_blank" rel="noopener noreferrer" class="footer__link-item">查看生成日志</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Graia Project.由 Docusaurus Ⅱ 强力驱动.</div></div></div></footer></div>
<script src="/styles.dccb9d42.js"></script>
<script src="/runtime~main.4afdf158.js"></script>
<script src="/main.63623e3e.js"></script>
<script src="/common.7d11658c.js"></script>
<script src="/2.a1f0fbba.js"></script>
<script src="/13.74563554.js"></script>
<script src="/14.ed9486b4.js"></script>
<script src="/f976f453.27d5effc.js"></script>
<script src="/17896441.c68a707e.js"></script>
<script src="/ace41326.1c0cb8df.js"></script>
</body>
</html>